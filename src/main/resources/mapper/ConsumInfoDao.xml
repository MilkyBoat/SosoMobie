<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 设置为cardDao接口方法提供sql语句配置 -->
<mapper namespace="cn.milkyship.sosoMobile.dao.ConsumInfoDao">

	<insert id="save" parameterType="ConsumInfo">
		INSERT INTO call_record( card_number, rec_type, consum_data, rec_time)
			VALUES (#{cardNumber}, #{type}, #{consumData}, NOW())
    </insert>

	<delete id="del" parameterType="ConsumInfo">
       DELETE FROM call_record WHERE card_number = #{cardNumber}, rec_type = #{type}, consum_data = #{consumData}
    </delete>

	<update id="update" parameterType="ConsumInfo">
       UPDATE call_record SET
				card_number = #{cardNumber},
				rec_type = #{type},
				consum_data = #{consumData},
				rec_time = NOW()
				WHERE card_number = #{cardNumber}
    </update>

	<resultMap id="consumInfoMap" type="ConsumInfo">
		<result property="cardNumber" column="card_number"/>
		<result property="type" column="rec_type"/>
		<result property="consumData" column="consum_data"/>
	</resultMap>

	<select id="findRecByNumber" resultMap="consumInfoMap" parameterType="String" fetchSize="20">
       SELECT card_number, rec_type, consum_data FROM call_record WHERE card_number = #{Number}
    </select>

</mapper>